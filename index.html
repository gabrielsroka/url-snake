<body><script>let t=document,e=t.body,i=Math,n='<meta name="viewport" content="width=device-width,initial-scale=1" />Space: start/reset. Arrows: Move<div><canvas id=a><style>#a{border:solid;width:90%}*{background:tan;display:flex;flex-direction:column;align-items:center;width:100%;font-size:1.2rem;font}</style>',o=40,d=400,l,r,c=[[3,3]],s={37:1,38:1,39:1,40:1},f,h=c,u=c[0],w="#000",g="red",m="addEventListener",p=(t,e,i=w,n=o,l=o)=>{A.fillStyle=i,A.fillRect(t,e,n,l)},v=(t,e,i=e,n="center")=>{A.fillStyle=w,A.textAlign=n,A.fillText(t,e,i)},b=()=>i.floor(9*i.random()),M=()=>{if(l){let[t,e]=c[0],i=t+f%2,n=e+(f-1)%2,l=([t,e])=>t==i&&e==n;if(c.pop(),i<0||9<i||n<0||9<n||c.some(l))return S();c=[[i,n],...c],l(u)&&(c.push([...c[r]]),r++,u=[b(),b()]),p(0,0,"tan",d,d);for([x,y]of c)p(x*o,y*o);p(u[0]*o,u[1]*o,g),v(r,9,30,"left")}},S=()=>{l=0,p(0,0,g,d,d),v(":(",d/2)},k=()=>{l=1,c=[...h],f=2,r=0},A=(e.innerHTML=n,a.getContext("2d")),{width:C,height:L,x:R,y:T}=(a.height=a.width=d,A.font="30px f",a.getBoundingClientRect());t[m]("keyup",({which:t})=>{s[t]?f=t-38:32!=t||l||k()}),a[m]("touchstart",({touches:[{clientX:t,clientY:e}]})=>{l||k();t-=R,e-=T;e<L/3&&(f=0),e>L/3*2&&(f=2),t<C/3&&(f=-1),t>C/3*2&&(f=1)}),setInterval(M,d);</script>