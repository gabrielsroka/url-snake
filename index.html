<body><script>let e=document,t=e.body,i=Math,n='<meta name="viewport" content="width=device-width,initial-scale=1" />Space: start/reset. Arrows: Move<div><canvas id=a><style>#a{border:solid;width:80vmin}*{background:tan;display:flex;flex-direction:column;align-items:center;font-size:1.2rem;}</style>',o=40,r=400,l,d,c=[[3,3]],s={37:1,38:1,39:1,40:1},f,h=c,m=c[0],u="#000",g="red",p="addEventListener",v=(e,t,i=u,n=o,l=o)=>{A.fillStyle=i,A.fillRect(e,t,n,l)},w=(e,t,i=t,n="center")=>{A.fillStyle=u,A.textAlign=n,A.fillText(e,t,i)},b=()=>i.floor(9*i.random()),M=()=>{if(l){let[e,t]=c[0],i=e+f%2,n=t+(f-1)%2,l=([e,t])=>e==i&&t==n;if(c.pop(),i<0||9<i||n<0||9<n||c.some(l))return S();c=[[i,n],...c],l(m)&&(c.push([...c[d]]),d++,m=[b(),b()]),v(0,0,"tan",r,r);for([x,y]of c)v(x*o,y*o);v(m[0]*o,m[1]*o,g),w(d,9,30,"left")}},S=()=>{l=0,v(0,0,g,r,r),w(":(",r/2)},k=()=>{l=1,c=[...h],f=2,d=0},A=(t.innerHTML=n,a.getContext("2d")),{width:C,height:L,x:R,y:T}=(a.height=a.width=r,A.font="30px f",a.getBoundingClientRect());e[p]("keyup",({which:e})=>{s[e]?f=e-38:32!=e||l||k()}),a[p]("touchstart",({touches:[{clientX:e,clientY:t}]})=>{l||k();e-=R,t-=T;t<L/3&&(f=0),t>L/3*2&&(f=2),e<C/3&&(f=-1),e>C/3*2&&(f=1)}),setInterval(M,r);</script>