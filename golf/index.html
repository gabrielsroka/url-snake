<body><script>let e=document,t=e.body,l=Math,o="Space: start/reset. Arrows: Move<div><canvas id=a><style>#a{border:solid}*{background:tan}</style>",n=40,i=400,r,d,s=[[3,3]],c={37:1,38:1,39:1,40:1},h,p=s,u=s[0],g="#000",m,v=(e=g,t=i,o=0,r=o)=>{m[f="fillStyle"]=e,m.fillRect(o*n,r*n,t,t)},b=(e,t=i/2,o=t,r="center")=>{m[f]=g,m.textAlign=r,m.fillText(e,t,o)},w=e=>{if(r){let[e,t]=s[0],o=e+h%2,r=t+(h-1)%2,a=([e,t])=>e==o&&t==r;if(s.pop(),o<0||9<o||r<0||9<r||s.some(a))return M();s=[[o,r],...s],a(u)&&(s.push([...s[d++]]),u=u.map(e=>l.floor(9*l.random()))),v`tan`;for([x,y]of s)v(g,n,x,y);v("red",n,u[0],u[1]),b(d,9,30,"left")}},M=e=>{r=0,v`red`,b`:(`},k=e=>{r=1,s=[...p],h=2,d=0};t.innerHTML=o,m=a.getContext`2d`,a.height=a.width=i,m.font="30px f",e.onkeyup=({which:e})=>{c[e]?h=e-38:32!=e||r||k()},setInterval(w,i);</script>