<body><script>let e=document,t=e.body,l=Math,r="Space: start/reset. Arrows: Move<div><canvas id=a><style>#a{border:solid}*{background:tan}</style>",n=40,o=400,i,d,f=[[3,3]],s={37:1,38:1,39:1,40:1},c,h=f,p=f[0],u="#000",v="red",g=(e,t,l=u,r=n,a=n)=>{k.fillStyle=l,k.fillRect(e,t,r,a)},b=(e,t,l=t,r="center")=>{k.fillStyle=u,k.textAlign=r,k.fillText(e,t,l)},m=()=>l.floor(9*l.random()),w=()=>{if(i){let[e,t]=f[0],l=e+c%2,r=t+(c-1)%2,a=([e,t])=>e==l&&t==r;if(f.pop(),l<0||9<l||r<0||9<r||f.some(a))return M();f=[[l,r],...f],a(p)&&(f.push([...f[d]]),d++,p=[m(),m()]),g(0,0,"tan",o,o);for([x,y]of f)g(x*n,y*n);g(p[0]*n,p[1]*n,v),b(d,9,30,"left")}},M=()=>{i=0,g(0,0,v,o,o),b(":(",o/2)},S=()=>{i=1,f=[...h],c=2,d=0},k=(t.innerHTML=r,a.getContext("2d"));a.height=a.width=o,k.font="30px f",e.addEventListener("keyup",({which:e})=>{s[e]?c=e-38:32!=e||i||S()}),setInterval(w,o);</script>